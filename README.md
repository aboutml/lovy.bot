# üéÅ Lovy Bot

Telegram –±–æ—Ç –∫–æ–ª–µ–∫—Ç–∏–≤–Ω–∏—Ö –∑–Ω–∏–∂–æ–∫ (Groupon-—Ñ–æ—Ä–º–∞—Ç) –¥–ª—è –£–∫—Ä–∞—ó–Ω–∏.

## üìã –û–ø–∏—Å

**Lovy** (–õ–æ–≤–∏) ‚Äî —Ü–µ –ø–ª–∞—Ç—Ñ–æ—Ä–º–∞ –¥–ª—è –∫–æ–ª–µ–∫—Ç–∏–≤–Ω–∏—Ö –∑–Ω–∏–∂–æ–∫, –¥–µ –∑–Ω–∏–∂–∫–∞ –∞–∫—Ç–∏–≤—É—î—Ç—å—Å—è –∫–æ–ª–∏ –Ω–∞–±–∏—Ä–∞—î—Ç—å—Å—è –º—ñ–Ω—ñ–º–∞–ª—å–Ω–∞ –∫—ñ–ª—å–∫—ñ—Å—Ç—å –ª—é–¥–µ–π. –í—Å–µ –ø—Ä–∞—Ü—é—î —á–µ—Ä–µ–∑ Telegram ‚Äî –±–µ–∑ —Å–∞–π—Ç—ñ–≤ —Ç–∞ –¥–æ–¥–∞—Ç–∫—ñ–≤.

### –î–ª—è –∫–ª—ñ—î–Ω—Ç—ñ–≤:

- –ü–µ—Ä–µ–≥–ª—è–¥–∞–π –ø—Ä–æ–ø–æ–∑–∏—Ü—ñ—ó –∑—ñ –∑–Ω–∏–∂–∫–∞–º–∏ —É —Å–≤–æ—î–º—É –º—ñ—Å—Ç—ñ
- –ü—Ä–∏—î–¥–Ω—É–π—Å—è –¥–æ –∞–∫—Ü—ñ–π
- –û—Ç—Ä–∏–º—É–π —É–Ω—ñ–∫–∞–ª—å–Ω–∏–π –∫–æ–¥ –∫–æ–ª–∏ –Ω–∞–±–∏—Ä–∞—î—Ç—å—Å—è –º—ñ–Ω—ñ–º—É–º –ª—é–¥–µ–π
- –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–π –∑–Ω–∏–∂–∫—É —Ç–∞ –∑–∞–ª–∏—à–∞–π –≤—ñ–¥–≥—É–∫

### –î–ª—è –±—ñ–∑–Ω–µ—Å—É:

- –°—Ç–≤–æ—Ä—é–π –ø—Ä–æ–ø–æ–∑–∏—Ü—ñ—ó –∑—ñ –∑–Ω–∏–∂–∫–∞–º–∏
- –ü–ª–∞—Ç–∏—à —Ç—ñ–ª—å–∫–∏ –∑–∞ –∫–ª—ñ—î–Ω—Ç—ñ–≤, —è–∫—ñ —Ä–µ–∞–ª—å–Ω–æ –ø—Ä–∏–π—à–ª–∏ (15% –∫–æ–º—ñ—Å—ñ—è)
- –û—Ç—Ä–∏–º—É–π –¥–µ—Ç–∞–ª—å–Ω—É —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É
- –í—Å–µ –≤ –æ–¥–Ω–æ–º—É Telegram –±–æ—Ç—ñ

## üèóÔ∏è –ê—Ä—Ö—ñ—Ç–µ–∫—Ç—É—Ä–∞

```
lovy-bot/
‚îú‚îÄ‚îÄ src/
‚îÇ   ‚îú‚îÄ‚îÄ index.js              # –¢–æ—á–∫–∞ –≤—Ö–æ–¥—É
‚îÇ   ‚îú‚îÄ‚îÄ config.js             # –ö–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—è
‚îÇ   ‚îÇ
‚îÇ   ‚îú‚îÄ‚îÄ bots/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ userBot.js        # –ë–æ—Ç –¥–ª—è –∫–ª—ñ—î–Ω—Ç—ñ–≤
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ businessBot.js    # –ë–æ—Ç –¥–ª—è –±—ñ–∑–Ω–µ—Å—É
‚îÇ   ‚îÇ
‚îÇ   ‚îú‚îÄ‚îÄ handlers/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ user/             # –û–±—Ä–æ–±–Ω–∏–∫–∏ –¥–ª—è –∫–ª—ñ—î–Ω—Ç—ñ–≤
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ commands.js
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ citySelection.js
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ deals.js
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ booking.js
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ review.js
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ profile.js
‚îÇ   ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ business/         # –û–±—Ä–æ–±–Ω–∏–∫–∏ –¥–ª—è –±—ñ–∑–Ω–µ—Å—É
‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ commands.js
‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ registration.js
‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ deals.js
‚îÇ   ‚îÇ       ‚îî‚îÄ‚îÄ verification.js
‚îÇ   ‚îÇ
‚îÇ   ‚îú‚îÄ‚îÄ services/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ dealService.js        # –õ–æ–≥—ñ–∫–∞ –∞–∫—Ü—ñ–π
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ notificationService.js # –°–ø–æ–≤—ñ—â–µ–Ω–Ω—è
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ antifraudService.js   # –ê–Ω—Ç–∏—Ñ—Ä–æ–¥
‚îÇ   ‚îÇ
‚îÇ   ‚îú‚îÄ‚îÄ db/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ database.js       # Supabase –∫–ª—ñ—î–Ω—Ç
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ schema.sql        # –°—Ö–µ–º–∞ –ë–î
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ migrate.js        # –ú—ñ–≥—Ä–∞—Ü—ñ—ó
‚îÇ   ‚îÇ
‚îÇ   ‚îú‚îÄ‚îÄ utils/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ keyboards/        # –ö–ª–∞–≤—ñ–∞—Ç—É—Ä–∏
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ messages/         # –ü–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ helpers.js        # –î–æ–ø–æ–º—ñ–∂–Ω—ñ —Ñ—É–Ω–∫—Ü—ñ—ó
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ codeGenerator.js  # –ì–µ–Ω–µ—Ä–∞—Ü—ñ—è –∫–æ–¥—ñ–≤
‚îÇ   ‚îÇ
‚îÇ   ‚îú‚îÄ‚îÄ jobs/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ dealActivator.js  # –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–∞ –∞–∫—Ç–∏–≤–∞—Ü—ñ—è
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ reminderSender.js # –ù–∞–≥–∞–¥—É–≤–∞–Ω–Ω—è
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ reviewRequester.js # –ó–∞–ø–∏—Ç –≤—ñ–¥–≥—É–∫—ñ–≤
‚îÇ   ‚îÇ
‚îÇ   ‚îî‚îÄ‚îÄ webhook/
‚îÇ       ‚îî‚îÄ‚îÄ server.js         # Express —Å–µ—Ä–≤–µ—Ä
‚îÇ
‚îú‚îÄ‚îÄ package.json
‚îú‚îÄ‚îÄ .env.example
‚îî‚îÄ‚îÄ README.md
```

## üöÄ –®–≤–∏–¥–∫–∏–π —Å—Ç–∞—Ä—Ç

### 1. –ö–ª–æ–Ω—É–≤–∞–Ω–Ω—è —Ç–∞ –≤—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—è

```bash
cd lovy-bot
npm install
```

### 2. –°—Ç–≤–æ—Ä–µ–Ω–Ω—è –±–æ—Ç—ñ–≤ —É Telegram

1. –°—Ç–≤–æ—Ä—ñ—Ç—å –¥–≤–∞ –±–æ—Ç–∏ —á–µ—Ä–µ–∑ [@BotFather](https://t.me/BotFather):

   - `@YourLovyBot` ‚Äî –¥–ª—è –∫–ª—ñ—î–Ω—Ç—ñ–≤
   - `@YourLovyBizBot` ‚Äî –¥–ª—è –±—ñ–∑–Ω–µ—Å—É

2. –ó–±–µ—Ä–µ–∂—ñ—Ç—å —Ç–æ–∫–µ–Ω–∏ –æ–±–æ—Ö –±–æ—Ç—ñ–≤

### 3. –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è Supabase

1. –°—Ç–≤–æ—Ä—ñ—Ç—å –ø—Ä–æ–µ–∫—Ç –Ω–∞ [supabase.com](https://supabase.com)
2. –í–∏–∫–æ–Ω–∞–π—Ç–µ SQL –∑ —Ñ–∞–π–ª—É `src/db/schema.sql` –≤ SQL Editor
3. –ó–±–µ—Ä–µ–∂—ñ—Ç—å URL —Ç–∞ API Key

### 4. –ö–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—è

–°—Ç–≤–æ—Ä—ñ—Ç—å —Ñ–∞–π–ª `.env` –Ω–∞ –æ—Å–Ω–æ–≤—ñ `.env.example`:

```env
# Telegram Bot Tokens
TELEGRAM_USER_BOT_TOKEN=your_user_bot_token
TELEGRAM_BUSINESS_BOT_TOKEN=your_business_bot_token

# Supabase
SUPABASE_URL=https://xxxxx.supabase.co
SUPABASE_KEY=your_supabase_anon_key

# App Settings
NODE_ENV=development
PORT=3000

# Admin
ADMIN_USER_IDS=123456789
```

### 5. –ó–∞–ø—É—Å–∫

```bash
# –†–µ–∂–∏–º —Ä–æ–∑—Ä–æ–±–∫–∏
npm run dev

# –ü—Ä–æ–¥–∞–∫—à–µ–Ω
npm start
```

## üì± –§—É–Ω–∫—Ü—ñ–æ–Ω–∞–ª

### –ë–æ—Ç –¥–ª—è –∫–ª—ñ—î–Ω—Ç—ñ–≤ (@LovyBot)

| –ö–æ–º–∞–Ω–¥–∞     | –û–ø–∏—Å           |
| ----------- | -------------- |
| `/start`    | –ì–æ–ª–æ–≤–Ω–µ –º–µ–Ω—é   |
| `/profile`  | –ú—ñ–π –ø—Ä–æ—Ñ—ñ–ª—å    |
| `/bookings` | –ú–æ—ó –±—Ä–æ–Ω—é–≤–∞–Ω–Ω—è |
| `/help`     | –î–æ–ø–æ–º–æ–≥–∞       |

**–§–ª–æ—É:**

1. –í–∏–±—ñ—Ä –º—ñ—Å—Ç–∞
2. –ü–µ—Ä–µ–≥–ª—è–¥ –ø—Ä–æ–ø–æ–∑–∏—Ü—ñ–π (–∫–∞—Ç–µ–≥–æ—Ä—ñ—ó –∞–±–æ –≥–∞—Ä—è—á—ñ)
3. –î–µ—Ç–∞–ª—ñ –ø—Ä–æ–ø–æ–∑–∏—Ü—ñ—ó
4. "–Ø –∑ –≤–∞–º–∏" ‚Üí –±—Ä–æ–Ω—é–≤–∞–Ω–Ω—è
5. –ê–∫—Ç–∏–≤–∞—Ü—ñ—è –∫–æ–¥—É (–∫–æ–ª–∏ –Ω–∞–±—Ä–∞–ª–æ—Å—å –º—ñ–Ω—ñ–º—É–º)
6. –í—ñ–∑–∏—Ç + –≤—ñ–¥–≥—É–∫

### –ë–æ—Ç –¥–ª—è –±—ñ–∑–Ω–µ—Å—É (@LovyBizBot)

| –ö–æ–º–∞–Ω–¥–∞  | –û–ø–∏—Å            |
| -------- | --------------- |
| `/start` | –ì–æ–ª–æ–≤–Ω–µ –º–µ–Ω—é    |
| `/new`   | –ù–æ–≤–∞ –ø—Ä–æ–ø–æ–∑–∏—Ü—ñ—è |
| `/deals` | –ú–æ—ó –ø—Ä–æ–ø–æ–∑–∏—Ü—ñ—ó  |
| `/check` | –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ –∫–æ–¥  |
| `/stats` | –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞      |
| `/help`  | –î–æ–ø–æ–º–æ–≥–∞        |

**–§–ª–æ—É:**

1. –†–µ—î—Å—Ç—Ä–∞—Ü—ñ—è –±—ñ–∑–Ω–µ—Å—É
2. –°—Ç–≤–æ—Ä–µ–Ω–Ω—è –ø—Ä–æ–ø–æ–∑–∏—Ü—ñ—ó
3. –û—á—ñ–∫—É–≤–∞–Ω–Ω—è –Ω–∞–±–æ—Ä—É –ª—é–¥–µ–π
4. –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –∫–æ–¥—ñ–≤ –∫–ª—ñ—î–Ω—Ç—ñ–≤
5. –ó–≤—ñ—Ç —Ç–∞ –æ–ø–ª–∞—Ç–∞ –∫–æ–º—ñ—Å—ñ—ó

## üîí –ê–Ω—Ç–∏—Ñ—Ä–æ–¥ —Å–∏—Å—Ç–µ–º–∞

### –ó–∞—Ö–∏—Å—Ç –≤—ñ–¥ —à–∞—Ö—Ä–∞–π—Å—Ç–≤–∞ –±—ñ–∑–Ω–µ—Å—É:

1. **–î–≤–æ—Å—Ç–æ—Ä–æ–Ω–Ω—î –ø—ñ–¥—Ç–≤–µ—Ä–¥–∂–µ–Ω–Ω—è**

   - –ë—ñ–∑–Ω–µ—Å –ø—ñ–¥—Ç–≤–µ—Ä–¥–∂—É—î –≤—ñ–∑–∏—Ç
   - –ö–ª—ñ—î–Ω—Ç –ø—ñ–¥—Ç–≤–µ—Ä–¥–∂—É—î –æ—Ç—Ä–∏–º–∞–Ω–Ω—è –ø–æ—Å–ª—É–≥–∏

2. **Trust Score**

   - –ö–æ–∂–µ–Ω –±—ñ–∑–Ω–µ—Å –º–∞—î —Ä–µ–π—Ç–∏–Ω–≥ –¥–æ–≤—ñ—Ä–∏ (0-100)
   - –ó–º–µ–Ω—à—É—î—Ç—å—Å—è –ø—Ä–∏ —Å–∫–∞—Ä–≥–∞—Ö
   - –ù–∏–∑—å–∫–∏–π —Ä–µ–π—Ç–∏–Ω–≥ = –º–µ–Ω—à–∞ –≤–∏–¥–∏–º—ñ—Å—Ç—å

3. **–ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–µ –æ–ø–∏—Ç—É–≤–∞–Ω–Ω—è**

   - –ß–µ—Ä–µ–∑ 24 –≥–æ–¥–∏–Ω–∏ –ø—ñ—Å–ª—è –≤—ñ–∑–∏—Ç—É
   - "–¢–∏ —Å–∫–æ—Ä–∏—Å—Ç–∞–≤—Å—è –∑–Ω–∏–∂–∫–æ—é?"
   - –§—ñ–∫—Å–∞—Ü—ñ—è —Å–∫–∞—Ä–≥

4. **–õ—ñ–º—ñ—Ç–∏ –¥–ª—è –Ω–æ–≤–∏—Ö –±—ñ–∑–Ω–µ—Å—ñ–≤**
   - –ù–æ–≤—ñ –±—ñ–∑–Ω–µ—Å–∏: –º–∞–∫—Å 20 –∫–ª—ñ—î–Ω—Ç—ñ–≤ –Ω–∞ –∞–∫—Ü—ñ—é
   - –ü—ñ—Å–ª—è 3 –º—ñ—Å—è—Ü—ñ–≤ –±–µ–∑ —Å–∫–∞—Ä–≥: –±—ñ–ª—å—à–µ

## üìä –ë–∞–∑–∞ –¥–∞–Ω–∏—Ö

### –û—Å–Ω–æ–≤–Ω—ñ —Ç–∞–±–ª–∏—Ü—ñ:

- `cities` ‚Äî –º—ñ—Å—Ç–∞
- `categories` ‚Äî –∫–∞—Ç–µ–≥–æ—Ä—ñ—ó
- `users` ‚Äî –∫–ª—ñ—î–Ω—Ç–∏
- `businesses` ‚Äî –±—ñ–∑–Ω–µ—Å–∏
- `deals` ‚Äî –∞–∫—Ü—ñ—ó/–ø—Ä–æ–ø–æ–∑–∏—Ü—ñ—ó
- `bookings` ‚Äî –±—Ä–æ–Ω—é–≤–∞–Ω–Ω—è
- `reviews` ‚Äî –≤—ñ–¥–≥—É–∫–∏
- `complaints` ‚Äî —Å–∫–∞—Ä–≥–∏
- `business_reports` ‚Äî –∑–≤—ñ—Ç–∏ –¥–ª—è –±—ñ–∑–Ω–µ—Å—É

## üîÑ –§–æ–Ω–æ–≤—ñ –∑–∞–¥–∞—á—ñ (Jobs)

| Job               | –ß–∞—Å—Ç–æ—Ç–∞       | –û–ø–∏—Å                                 |
| ----------------- | ------------- | ------------------------------------ |
| `dealActivator`   | –∫–æ–∂–Ω—ñ 5 —Ö–≤    | –ê–∫—Ç–∏–≤–∞—Ü—ñ—è –∞–∫—Ü—ñ–π –ø—Ä–∏ –Ω–∞–±–æ—Ä—ñ –º—ñ–Ω—ñ–º—É–º—É  |
| `reviewRequester` | –∫–æ–∂–Ω—ñ 30 —Ö–≤   | –ó–∞–ø–∏—Ç –≤—ñ–¥–≥—É–∫—ñ–≤ (24 –≥–æ–¥ –ø—ñ—Å–ª—è –≤—ñ–∑–∏—Ç—É) |
| `reminderSender`  | —â–æ–¥–Ω—è –æ 10:00 | –ù–∞–≥–∞–¥—É–≤–∞–Ω–Ω—è –ø—Ä–æ –Ω–µ–≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω—ñ –∫–æ–¥–∏   |

## üöÄ –î–µ–ø–ª–æ–π

### Railway / Render / Heroku

1. –ü—ñ–¥–∫–ª—é—á—ñ—Ç—å —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä—ñ–π
2. –î–æ–¥–∞–π—Ç–µ –∑–º—ñ–Ω–Ω—ñ —Å–µ—Ä–µ–¥–æ–≤–∏—â–∞
3. –ó–∞–ø—É—Å—Ç—ñ—Ç—å

### Docker

```dockerfile
FROM node:20-alpine
WORKDIR /app
COPY package*.json ./
RUN npm ci --only=production
COPY . .
CMD ["npm", "start"]
```

## üìà –ü–æ–¥–∞–ª—å—à–∏–π —Ä–æ–∑–≤–∏—Ç–æ–∫

### MVP+:

- [ ] –ì–µ–æ–ª–æ–∫–∞—Ü—ñ—è (–ø—Ä–æ–ø–æ–∑–∏—Ü—ñ—ó –ø–æ—Ä—É—á)
- [ ] Push-—Å–ø–æ–≤—ñ—â–µ–Ω–Ω—è –ø—Ä–æ –Ω–æ–≤—ñ –∞–∫—Ü—ñ—ó
- [ ] –†–µ—Ñ–µ—Ä–∞–ª—å–Ω–∞ –ø—Ä–æ–≥—Ä–∞–º–∞ –∑ –±–æ–Ω—É—Å–∞–º–∏
- [ ] –Ü–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—è –∑ Google Maps

### –ú–∞—Å—à—Ç–∞–±—É–≤–∞–Ω–Ω—è:

- [ ] –ë—ñ–ª—å—à–µ –º—ñ—Å—Ç
- [ ] –í–µ—Ä–∏—Ñ—ñ–∫–∞—Ü—ñ—è –±—ñ–∑–Ω–µ—Å—ñ–≤
- [ ] –Ü–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—è –∑ –ø–ª–∞—Ç—ñ–∂–Ω–∏–º–∏ —Å–∏—Å—Ç–µ–º–∞–º–∏
- [ ] API –¥–ª—è –ø–∞—Ä—Ç–Ω–µ—Ä—ñ–≤

## üìù –õ—ñ—Ü–µ–Ω–∑—ñ—è

MIT

## ü§ù –ü—ñ–¥—Ç—Ä–∏–º–∫–∞

Telegram: @lovy_support
